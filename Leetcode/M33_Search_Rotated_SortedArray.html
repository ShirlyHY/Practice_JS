<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>20171228_33</title>
<meta http-equiv="content-type" content="text/html";charset="utf-8"/>     
    <script type="text/javascript">
        //<![CDATA[
    /*先用二分查找找出最大元素下标，则原数组变为两段有序子数组，
            在两子数组中再利用二分查找元素*******/
 var search = function(nums, target) {
   if(nums.length==1){
    alert(0/1);
       return (nums[0]==target)?0:-1;
   }
  
   var low=0,high=nums.length-1;
   //先找出最大元素下标,并赋给low
   while(low<high){
       var mid=parseInt((low+high)/2);//记得除完要取整！！！！！！！！！！
       if(nums[mid]<nums[low]){
           high=mid-1;       
        }
        else if(nums[mid]>nums[low]){
            low=mid;
        }
        else{//此时low+1=high
            if(nums[high]>nums[low]){
                low=high;
            }
            break;
        }
   }
   var max=low;//现在原数组分为0~low和low+1~length-1两段有序数组
   if(target>=nums[0]){
       var low=0,high=max;
       while(low<=high){
           mid=parseInt((low+high)/2);
           if(target==nums[mid]){
               alert(mid);
               return mid;
           }
           else if(nums[mid]>target){
               high=mid-1;
           }
           else{
               low=mid+1;
           }           
       }
       alert(-1);
       return -1;
   }
   else{
    var low=max+1,high=nums.length-1;
       while(low<=high){
           mid=parseInt((low+high)/2);
           if(target==nums[mid]){
            alert(mid);
               return mid;
           }
           else if(nums[mid]>target){
               high=mid-1;
           }
           else{
               low=mid+1;
           }           
       }
       alert(-1);
       return -1;
   }
};
search([1,3],1);
            //]]>
    </script>
</head>



<body >
   
</body>
</html>